$(function(){function e(e){var a=window.event||e,t=a.detail?a.detail:a.wheelDelta;t/=120,(f+=(t=u?t/3:t)/5)>0?o.css({transform:"rotateX(70deg) scale3d("+f+","+f+","+f+")"}):f=0}function a(e,a,o){var n=e.pageX-t.offset().left,s=e.pageY-t.offset().top;TweenMax.to(a,1,{x:(n-t.width()/2)/t.width()*o,y:(s-t.height()/2)/t.height()*o})}var t=$("#universe"),o=$('[class^="galaxy-"]'),n=$(".loader"),s=$(".loader__wrapper"),r=$(".loader__local-button"),i=$(".loader__redirect"),d=$(".loader__control-button"),l="",c=/mobile/i.test(navigator.userAgent),u=/Firefox/i.test(navigator.userAgent),_=["Sun","Mercury","Venus","Earth","Mars","Jupiter","Saturn","Uranus","Neptune"];c&&($('<input class="loader__text" type="text" placeholder=".  .  .  ." maxlength="4" />').insertBefore(r),r.parent().addClass("row-flex")),$(".loader__text").length&&(l=$(".loader__text"),setTimeout(function(){l.width(r.width())},0)),n.removeClass("hidden"),null===sessionStorage.getItem("loader")?(sessionStorage.setItem("loader","true"),n.addClass("loader__new-session"),s.children().not(".loader__planet").removeClass("hidden"),t.addClass("universe__new-session"),d.on("click",function(){var e=$(this).data("attr");i.addClass("hidden"),$("."+e).removeClass("hidden")}),r.on("click",function(){c?(socket.emit("load",{key:$(".loader__text").val()}),socket.on("access",function(e){"granted"===e.access&&""!==e.access?(n.removeClass("loader__new-session").addClass("loader__new-session--clicked"),t.addClass("universe__new-session--clicked")):(l.addClass("loader__text--error loader__text--animation"),$(".loader__text").on("focus",function(){l.removeClass("loader__text--error")}),setTimeout(function(){l.removeClass("loader__text--animation")},1e3))})):(n.removeClass("loader__new-session").addClass("loader__new-session--clicked"),t.addClass("universe__new-session--clicked"))}),socket.on("key",function(e){$(".loader__remote-button").val(e.code)})):(n.addClass("loader__same-session"),t.addClass("universe__same-session"),s.children().not(".loader__planet").addClass("hidden"));var m=u?"DOMMouseScroll":"mousewheel",f=1;if(document.attachEvent?document.attachEvent("on"+m,e):document.addEventListener&&document.addEventListener(m,e,!1),t.on("mousemove",function(e){a(e,"#galaxy .planet-wrapper .planet",-20),$(".moons-wrapper .moon").each(function(t,o){a(e,o,-50-50*t)})}),annyang){var h={"back (to) (main) (first) (page)":function(){window.location="/"},"(show) (me) (details) (about) (the) :word":function(e){$.each(_,function(a,t){e.toLowerCase()===t.toLowerCase()&&(c||(window.location=e.toLowerCase()))})},"image about *search":function(e){var a="https://images-api.nasa.gov/search?q="+e+"&title="+e+"&media_type=image&year_start=1900";$.ajax({url:a,success:function(e){$.each(e.collection.items,function(e,a){if(e>=10)return!1;$("<img />").attr("src",a.links[0].href).appendTo(".info-gallery")})},error:function(){console.log("error")}})}};annyang.addCommands(h),annyang.start({autoRestart:!0})}else console.log("Speech Recognition is not supported")});